@use "sass:map";
@import "./sidebar-group/sidebar-group.theme";
@import "sidebar-content.shared.theme";

@mixin ql-sidebar-content-theme($theme, $typo: null, $overrides: ()) {
  $config: mat-get-color-config($theme);
  $primary: map-get($config, primary);
  $ascent: map-get($config, accent);
  $warn: map-get($config, warn);

  $content-values: (
          group-child-padding: 3.2rem,
          group-arrow-position: 'end',
          group-row-space-between: .4rem,
          selected-border-color: mat-color($primary),
          item-padding: 0 0 0 5%,
          item-selected-border-width: .4rem,
          item-selected-background-color: mat-color($primary, A100, 0.4),
          row-height: 4rem,
          row-width: 100%,
          row-group-width: 100%
  );

  $content-values: map.merge($content-values, $overrides);

  ql-sidebar-content {

    @include ql-sidebar-group-theme($theme, $typo);

    ql-sidebar-group {
      width: map.get($content-values, row-group-width);
      margin-bottom: map.get($content-values, group-row-space-between);

      .group-row {
        grid-template-areas: "text arrow";
        grid-template-columns: .8fr .2fr;
      }

      @if (map.get($content-values, group-arrow-position) == 'start') {
        &.has-icon {
          .group-row {
            grid-template-areas: "arrow text icon"
          }
        }
        .group-row {
          grid-template-areas: "arrow text";
          grid-template-columns: .2fr .8fr;
        }
      }

      ql-sidebar-item {
        width: map.get($content-values, row-width);
        padding-left: map.get($content-values, group-child-padding);

        .text {
        }
      }

      .group-row {
        &:hover {
          @include hover-item($ascent);
        }
      }
    }

    ql-sidebar-item {
      width: map.get($content-values, row-width);
      transition-duration: 250ms;
      transition-property: background-color;
      transition-timing-function: linear;

      height: map.get($content-values, row-height);
      padding: map.get($content-values, item-padding);
      font-size: mat-font-size($typo, body-1);
      font-family: mat-font-family($typo);
      color: mat-color($primary);
      fill: mat-color($primary);
      grid-template-columns: .2fr .8fr map.get($content-values, item-selected-border-width);
      background-color: inherit;

      .border {
        height: 0;
      }

      &.is-selected {
        background-color: map.get($content-values, item-selected-background-color);

        .border {
          // Note here we expect this theme to be called from sidebar theme not on its own
          // So we expect row-height to be in $overrides map but its not declared in defaults of content theme
          height: map.get($content-values, row-height);
          background-color: map.get($content-values, selected-border-color);
        }
      }

      &:hover {
        @include hover-item($ascent);
      }
    }
  }
}


